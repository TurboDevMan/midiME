        +--------------------+
        |    index.html      |
        | - Canvas element   |
        | - Control buttons  |
        | - Loads main.js    |
        +---------+----------+
                  |
                  v
        +--------------------+
        |     main.js        |  <== App orchestrator
        | - Initializes canvas
        | - Handles playback controls
        | - Calls animation loop
        | - Imports MIDI, runway, notes
        +--+---------+-------+
           |         |
           v         v
  +---------------+  +------------------+
  | midiLoader.js |  |  noteRenderer.js |
  | - Parses MIDI |  | - Draws notes    |
  | - Outputs     |  | - Uses key map   |
  |   { note, start, duration }         |
  +---------------+  +--------+---------+
                               |
                               v
                      +------------------+
                      |   runway.js      |
                      | - Renders keys   |
                      | - Provides layout|
                      |   & keyMap       |
                      +------------------+

ðŸ“œ Function Reference Index

ðŸ”¹ main.js
	â€¢	startPlayback()
Starts the animation loop and playback timer.
	â€¢	pausePlayback()
Stops the animation loop.
	â€¢	handleFileInput(event)
Reads MIDI file and triggers parsing.
	â€¢	animate(timestamp)
Main loop: clears canvas, updates time, calls draw functions.

â¸»

ðŸ”¹ midiLoader.js
	â€¢	parseMidiFile(arrayBuffer)
Parses a MIDI file using Tone.js, returns normalized note data with pitch names like â€œC#4â€.

â¸»

ðŸ”¹ runway.js
	â€¢	resizeCanvas(canvas)
Resizes canvas and establishes baseline dimensions for layout.
	â€¢	generateKeyLayoutMap(canvasWidth)
ðŸ”¥ Core function!
Generates key layout and lookup map of note names â†’ visual properties (x, width, type).
	â€¢	drawRunway(ctx, canvas)
Draws the piano keyboard onto the canvas using the layout.
	â€¢	[deprecated] generateWhiteKeyLayout(...)
Previously used to generate only white keys before unified layout existed.
	â€¢	[deprecated] generateBlackKeyLayout(...)
Used with white key layout to position black keys. Now superseded by generateKeyLayoutMap.
	â€¢	[internal] getWhiteKeyCount(...)
Helper to count white keys between MIDI range.

â¸»

ðŸ”¹ noteRenderer.js
	â€¢	drawNotes(ctx, canvas, notes, currentTime)
Draws falling notes in sync with current playback time. Uses generateKeyLayoutMap() to position each note by name.

â¸»

ðŸ§° Current Flow (Function Order)
	1.	index.html loads
	2.	main.js sets up canvas and event listeners
	3.	MIDI file is chosen â†’ handleFileInput()
	4.	â†’ Calls parseMidiFile() from midiLoader.js
	5.	â†’ Parsed notes stored in app state
	6.	Play button triggers startPlayback()
	7.	â†’ Animation loop begins:
	â€¢	drawRunway() from runway.js
	â€¢	drawNotes() from noteRenderer.js                   